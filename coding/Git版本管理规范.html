<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git版本管理规范 | 前端博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="logo.png">
    <meta name="description" content="前端随记">
    <meta name="theme-color" content="#1890ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.51cb94b8.css" as="style"><link rel="preload" href="/assets/js/app.8eed99b7.js" as="script"><link rel="preload" href="/assets/js/2.746406bc.js" as="script"><link rel="preload" href="/assets/js/1.85334cdf.js" as="script"><link rel="preload" href="/assets/js/34.7ceed9a8.js" as="script"><link rel="prefetch" href="/assets/js/10.7792da56.js"><link rel="prefetch" href="/assets/js/11.7fe21666.js"><link rel="prefetch" href="/assets/js/12.a487dee3.js"><link rel="prefetch" href="/assets/js/13.8115f143.js"><link rel="prefetch" href="/assets/js/14.3b22cd17.js"><link rel="prefetch" href="/assets/js/15.91c22ce4.js"><link rel="prefetch" href="/assets/js/16.811241c5.js"><link rel="prefetch" href="/assets/js/17.e771a4a6.js"><link rel="prefetch" href="/assets/js/18.b2e844d3.js"><link rel="prefetch" href="/assets/js/19.926a092d.js"><link rel="prefetch" href="/assets/js/20.4a830ce6.js"><link rel="prefetch" href="/assets/js/21.8b8a1267.js"><link rel="prefetch" href="/assets/js/22.c9c85d12.js"><link rel="prefetch" href="/assets/js/23.66912ed2.js"><link rel="prefetch" href="/assets/js/24.8349db92.js"><link rel="prefetch" href="/assets/js/25.5b5cde23.js"><link rel="prefetch" href="/assets/js/26.a02bba46.js"><link rel="prefetch" href="/assets/js/27.42fe3f55.js"><link rel="prefetch" href="/assets/js/28.712a66aa.js"><link rel="prefetch" href="/assets/js/29.fef79c3a.js"><link rel="prefetch" href="/assets/js/3.2a0baff0.js"><link rel="prefetch" href="/assets/js/30.4711327b.js"><link rel="prefetch" href="/assets/js/31.f1846c1c.js"><link rel="prefetch" href="/assets/js/32.2c5a2750.js"><link rel="prefetch" href="/assets/js/33.5759bb00.js"><link rel="prefetch" href="/assets/js/35.a274b75c.js"><link rel="prefetch" href="/assets/js/36.1726d763.js"><link rel="prefetch" href="/assets/js/37.6830602c.js"><link rel="prefetch" href="/assets/js/38.9d774650.js"><link rel="prefetch" href="/assets/js/39.48803f46.js"><link rel="prefetch" href="/assets/js/4.48836cd3.js"><link rel="prefetch" href="/assets/js/40.93fc001e.js"><link rel="prefetch" href="/assets/js/41.08741914.js"><link rel="prefetch" href="/assets/js/42.cbda72cb.js"><link rel="prefetch" href="/assets/js/43.2cb9b041.js"><link rel="prefetch" href="/assets/js/44.cab5e0c5.js"><link rel="prefetch" href="/assets/js/45.30791aa4.js"><link rel="prefetch" href="/assets/js/46.bb735dd6.js"><link rel="prefetch" href="/assets/js/47.2a67c15f.js"><link rel="prefetch" href="/assets/js/48.acfa147c.js"><link rel="prefetch" href="/assets/js/49.95cbdd36.js"><link rel="prefetch" href="/assets/js/5.eb583009.js"><link rel="prefetch" href="/assets/js/50.412c06f7.js"><link rel="prefetch" href="/assets/js/51.264885c7.js"><link rel="prefetch" href="/assets/js/52.f084cdf9.js"><link rel="prefetch" href="/assets/js/53.ff94d3e2.js"><link rel="prefetch" href="/assets/js/54.50cc4b69.js"><link rel="prefetch" href="/assets/js/55.b4dc4ce9.js"><link rel="prefetch" href="/assets/js/56.0a2c6562.js"><link rel="prefetch" href="/assets/js/57.2e90a55c.js"><link rel="prefetch" href="/assets/js/58.d6f576e1.js"><link rel="prefetch" href="/assets/js/59.04095a57.js"><link rel="prefetch" href="/assets/js/6.5f4e35db.js"><link rel="prefetch" href="/assets/js/60.b8551a64.js"><link rel="prefetch" href="/assets/js/61.2f644cb2.js"><link rel="prefetch" href="/assets/js/62.6f12c7c5.js"><link rel="prefetch" href="/assets/js/63.996d62f4.js"><link rel="prefetch" href="/assets/js/64.59b589a7.js"><link rel="prefetch" href="/assets/js/65.bc15a19a.js"><link rel="prefetch" href="/assets/js/66.6883bf43.js"><link rel="prefetch" href="/assets/js/7.603ae078.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.aae61d50.js">
    <link rel="stylesheet" href="/assets/css/0.styles.51cb94b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/mode/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/coding/" class="nav-link router-link-active">
  前端规范
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/mode/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/coding/" class="nav-link router-link-active">
  前端规范
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端规范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/coding/通用编码规约.html" class="sidebar-link">通用编码规约</a></li><li><a href="/coding/HTML 编码规约.html" class="sidebar-link">HTML 编码规约</a></li><li><a href="/coding/CSS 编码规约.html" class="sidebar-link">CSS 编码规约</a></li><li><a href="/coding/JavaScript 编码规约.html" class="sidebar-link">JavaScript 编码规约</a></li><li><a href="/coding/Node.js 编码规约.html" class="sidebar-link">Node.js 编码规约</a></li><li><a href="/coding/TypeScript 编码规约.html" class="sidebar-link">TypeScript 编码规约</a></li><li><a href="/coding/Vue3编码规约.html" class="sidebar-link">Vue3编码规约</a></li><li><a href="/coding/Git提交信息规范.html" class="sidebar-link">Git提交信息规范</a></li><li><a href="/coding/Git版本管理规范.html" class="active sidebar-link">Git版本管理规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/Git版本管理规范.html#分支" class="sidebar-link">分支</a></li><li class="sidebar-sub-header"><a href="/coding/Git版本管理规范.html#附-git标签操作" class="sidebar-link">附：Git标签操作</a></li></ul></li><li><a href="/coding/VS Code 配置SonarLint.html" class="sidebar-link">VS Code 配置SonarLint</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git版本管理规范"><a href="#git版本管理规范" class="header-anchor">#</a> Git版本管理规范</h1> <h2 id="分支"><a href="#分支" class="header-anchor">#</a> 分支</h2> <h3 id="概览"><a href="#概览" class="header-anchor">#</a> 概览</h3> <table><thead><tr><th style="text-align:left;">分支类型</th> <th style="text-align:left;">命名规则</th> <th style="text-align:left;">创建自</th> <th style="text-align:left;">合入到</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">master</td> <td style="text-align:left;">master</td> <td style="text-align:left;">-</td> <td style="text-align:left;">-</td> <td style="text-align:left;">主分支</td></tr> <tr><td style="text-align:left;">release</td> <td style="text-align:left;">release/sprint标记</td> <td style="text-align:left;">master</td> <td style="text-align:left;">master</td> <td style="text-align:left;">待发布的版本</td></tr> <tr><td style="text-align:left;">feature</td> <td style="text-align:left;">feature/功能点名称</td> <td style="text-align:left;">master</td> <td style="text-align:left;">release</td> <td style="text-align:left;">新功能分支</td></tr> <tr><td style="text-align:left;">hotfix</td> <td style="text-align:left;">hotfix/bug号</td> <td style="text-align:left;">master</td> <td style="text-align:left;">master</td> <td style="text-align:left;">生产环境紧急bug修复</td></tr> <tr><td style="text-align:left;">tag</td> <td style="text-align:left;">vx.x.x</td> <td style="text-align:left;">master</td> <td style="text-align:left;">-</td> <td style="text-align:left;">master分支的标签</td></tr></tbody></table> <blockquote><p>注意：
若发布流程中使用 <code>docker build -t &lt;name&gt;:&lt;tag&gt; .</code>来创建镜像，并且tag的取值为此次发布的分支名称，则分支命名不可使用【release/sprint标记、feature/功能点名称】规则。
标签名称只支持<strong>小写字母</strong>、<strong>数字</strong>、<strong>连字符</strong>、<strong>下划线</strong>四种，因此建议将斜杠<code>/</code>改为下划线<code>_</code>进行连接。</p></blockquote> <p>注释：</p> <ul><li><strong>sprint标记</strong>：格式为 <code>sprint次数[-title]</code>，例如<code>sprint22-map</code>。若项目不采用敏捷管理方式，此字段可替代为预发布时间，例如<code>2019-05-20</code>，完整分支名 <code>release/2019-05-20</code>；</li> <li><strong>功能点名称</strong>：格式为小写连字符 <code>-</code>，例如：用户详情 <code>feature/user-details</code>；</li> <li><strong>bug号</strong>：为修复对应的 <a href="https://www.atlassian.com/software/jira" target="_blank" rel="noopener noreferrer">Jira<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Bug编号。</li></ul> <h3 id="说明"><a href="#说明" class="header-anchor">#</a> 说明</h3> <h4 id="master分支"><a href="#master分支" class="header-anchor">#</a> <code>master</code>分支</h4> <ul><li><code>master</code>主分支是线上当前发布的版本，是稳定可用的版本</li> <li>必须设置分支保护，并且由专人管理</li> <li>只有<code>pull</code>、<code>merge</code>权限，没有<code>push</code>权限</li> <li>发布后需打上<code>tag</code></li></ul> <h4 id="release分支"><a href="#release分支" class="header-anchor">#</a> <code>release</code>分支</h4> <ul><li>主要作用是给当前版本提测以及修复bug使用</li> <li>在一次迭代开发完成后，将所有自测通过的功能分支代码合并<code>release</code>分支，并设置分支保护</li> <li>只能<code>merge</code>，不能直接<code>push</code></li> <li>一旦封版，<code>release</code>分支必须冻结，不允许任何形式的代码改动</li></ul> <h4 id="feature分支"><a href="#feature分支" class="header-anchor">#</a> <code>feature</code>分支</h4> <ul><li><code>feature</code>分支作为完成某个特定功能的分支，从master拉取</li> <li><code>feature</code>分支的划分应综合业务和技术模块垂直切分，彼此互不影响</li> <li>只有开发自测通过的<code>feature</code>分支可以合并<code>release</code>分支</li> <li>项目发布生产环境后，需删除相应的<code>feature</code>分支</li></ul> <h4 id="hotfix分支"><a href="#hotfix分支" class="header-anchor">#</a> <code>hotfix</code>分支</h4> <ul><li>为了修复线上版本紧急的bug拉的分支</li> <li>从<code>master</code>拉取，测试后合并<code>master</code>发布</li> <li><code>hotfix</code>分支的命名应该与项目<code>bug</code>管理系统的<code>bug号</code>关联起来</li></ul> <h4 id="tag标签"><a href="#tag标签" class="header-anchor">#</a> <code>tag</code>标签</h4> <ul><li>设立的目的是作为发布记录，同时便于回滚</li> <li>由<code>版本号 + 描述信息</code>组成</li> <li>版本号为三位以‘.’分割的数字，从0.0.1开始，每一位依次向上叠加</li> <li>从前到后的三位数字分别为大版本迭代，一般迭代，紧急Bug修复</li> <li>当小数点前的版本数字加1时，小数点之后的所有数字归零</li></ul> <h3 id="需求开发"><a href="#需求开发" class="header-anchor">#</a> 需求开发</h3> <ul><li>将新需求/迭代拆分成不同的功能模块后，按模块从<code>master</code>新建功能分支<code>feature/功能分支名</code></li> <li>每天至少一次拉取、合并、提交操作，使代码分支与远程同步</li> <li>功能开发完毕，合并进相应的<code>release</code>分支</li> <li>当有新迭代上线，<code>master</code>分支代码发生变化时，未上线的分支必须同步一次</li></ul> <h3 id="发布测试"><a href="#发布测试" class="header-anchor">#</a> 发布测试</h3> <ul><li>从<code>master</code>主分支新建分支<code>release/YYYY-MM-DD</code></li> <li>在项目管理工具相应的<strong>发布版本管理</strong>模块中，创建相应的版本信息（记录版本号和描述），作为分支记录和发版依据</li> <li>更改项目框架代码中的<code>version</code>字段为当前版本号。例如前端改动<code>package.json</code>文件中的<code>version</code>字段</li> <li>将开发自测通过的功能分支合并到<code>release/YYYY-MM-DD</code>分支，由运维人员发布测试</li> <li>当开发人员接收到<code>Bug</code>，先在其相应功能分支修改，自测，最后合并到<code>release</code>分支，发布后通知测试验证</li></ul> <h3 id="生产发布"><a href="#生产发布" class="header-anchor">#</a> 生产发布</h3> <ul><li>生产环境由运维发布，发布对象为本次迭代的<code>release</code>分支</li> <li>项目发布第二天，项目管理员将<code>release</code>分支合并到<code>master</code>分支</li> <li>在<code>master</code>分支上打上<code>tag</code>，作为发布记录，同时便于回滚</li></ul> <h3 id="生产环境紧急bug修复"><a href="#生产环境紧急bug修复" class="header-anchor">#</a> 生产环境紧急<code>Bug</code>修复</h3> <ul><li>从master新建分支<code>hotfix/bug号</code>进行bug修复</li> <li>修复完毕并测试通过后，将分支<code>hotfix/bug号</code>合并<code>master</code>分支发布</li> <li>在<code>master</code>分支上打上<code>tag</code></li></ul> <h2 id="附-git标签操作"><a href="#附-git标签操作" class="header-anchor">#</a> 附：Git标签操作</h2> <h3 id="打标签并推送"><a href="#打标签并推送" class="header-anchor">#</a> 打标签并推送</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> tag <span class="token parameter variable">-a</span> v0.1.0 <span class="token parameter variable">-m</span> <span class="token string">'初始版本'</span>
$ <span class="token function">git</span> push origin <span class="token parameter variable">--tags</span>
</code></pre></div><h3 id="查看所有tag信息"><a href="#查看所有tag信息" class="header-anchor">#</a> 查看所有tag信息</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> tag <span class="token parameter variable">-n</span>
</code></pre></div><h3 id="补打标签"><a href="#补打标签" class="header-anchor">#</a> 补打标签</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 给指定commit打标签</span>
$ <span class="token function">git</span> tag <span class="token parameter variable">-a</span> v0.1.0 49e0cd2 <span class="token parameter variable">-m</span> <span class="token string">'初始版本'</span>
</code></pre></div><h3 id="打错标签"><a href="#打错标签" class="header-anchor">#</a> 打错标签</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 本地删除</span>
$ <span class="token function">git</span> tag <span class="token parameter variable">-d</span> v0.1.0
</code></pre></div><h3 id="删除标签"><a href="#删除标签" class="header-anchor">#</a> 删除标签</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 远程删除</span>
$ <span class="token function">git</span> push origin :refs/tags/v0.1.0
$ <span class="token function">git</span> push origin <span class="token parameter variable">--delete</span> tag v0.1.0
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/coding/Git提交信息规范.html" class="prev">
        Git提交信息规范
      </a></span> <span class="next"><a href="/coding/VS Code 配置SonarLint.html">
        VS Code 配置SonarLint
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8eed99b7.js" defer></script><script src="/assets/js/2.746406bc.js" defer></script><script src="/assets/js/1.85334cdf.js" defer></script><script src="/assets/js/34.7ceed9a8.js" defer></script>
  </body>
</html>
